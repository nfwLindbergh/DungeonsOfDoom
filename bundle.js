!function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(r,o,function(t){return n[t]}.bind(null,o));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";e.r(t);e(1);window.onload=function(){var n=function(){function n(){this.monsterList=[],this.player=null,this.playerIds=null,this.monsterIds=null,this.logCount=""}return n.prototype.beginFight=function(){this.monsterList[0].health=this.monsterList[0].health-this.player.strength,this.monsterIds[2].value=this.monsterList[0].health.toString(),this.monsterList[0].health<=0&&(this.logCount=this.logCount+"The "+this.monsterList[0].name+" died<br>",this.removeMonster(),this.upDateMonsterValue())},n.prototype.updatePlayerValues=function(){this.playerIds=document.querySelectorAll("#player > input"),this.playerIds[0].value=this.player.name.toString(),this.playerIds[1].value=this.player.strength.toString(),this.playerIds[2].value=this.player.health.toString()},n.prototype.upDateMonsterValue=function(){this.monsterIds=document.querySelectorAll("#monster > input"),this.monsterList.length>0?(this.monsterIds[0].value=this.monsterList[0].name.toString(),this.monsterIds[1].value=this.monsterList[0].strength.toString(),this.monsterIds[2].value=this.monsterList[0].health.toString()):alert("You won! All monsters are dead!")},n.prototype.removeMonster=function(){this.monsterList.shift()},n}(),t=function(n,t,e){this.name=n,this.health=t,this.strength=e,this.name=n,this.health=t,this.strength=e},e=function(n,t,e){this.name=n,this.health=t,this.strength=e,this.name=n,this.health=t,this.strength=e},r=function(){function n(){}return n.readInAndCreatePlayer=function(n){var t=document.querySelector("#playerData");n.player=new e(t.dataset.name,parseInt(t.dataset.health,10),parseInt(t.dataset.strength,10))},n.readInAndCreateMonster=function(n){document.querySelectorAll("#monsters > input").forEach(function(e){n.monsterList.push(new t(e.dataset.name,parseInt(e.dataset.health,10),parseInt(e.dataset.strength,10)))})},n}(),o=new n;r.readInAndCreateMonster(o),r.readInAndCreatePlayer(o),o.updatePlayerValues(),o.upDateMonsterValue();var a=document.querySelector("#fight"),i=document.querySelector("#console");a.onclick=function(){o.logCount=o.logCount+"POW!!! <br>- "+o.player.name+" bitch-slapped "+o.monsterList[0].name+" and gave "+o.player.strength+" damage <br>"+o.monsterList[0].name+": OW! *cries*<br>",o.beginFight(),i.innerHTML=o.logCount}}},function(n,t,e){var r=e(2);"string"==typeof r&&(r=[[n.i,r,""]]);var o={insert:"head",singleton:!1};e(4)(r,o);r.locals&&(n.exports=r.locals)},function(n,t,e){(n.exports=e(3)(!1)).push([n.i,'/* \nhtml5doctor.com Reset Stylesheet\nv1.6.1\nLast Updated: 2010-09-17\nAuthor: Richard Clark - http://richclarkdesign.com \nTwitter: @rich_clark\n*/\n\nhtml,\nbody,\ndiv,\nspan,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\nabbr,\naddress,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\nsamp,\nsmall,\nstrong,\nsub,\nsup,\nvar,\nb,\ni,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  background: transparent;\n}\n\nbody {\n  line-height: 1;\n}\n\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\n\nnav ul {\n  list-style: none;\n}\n\nblockquote,\nq {\n  quotes: none;\n}\n\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: "";\n  content: none;\n}\n\na {\n  margin: 0;\n  padding: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  background: transparent;\n}\n\n/* change colours to suit your needs */\nins {\n  background-color: #ff9;\n  color: #000;\n  text-decoration: none;\n}\n\n/* change colours to suit your needs */\nmark {\n  background-color: #ff9;\n  color: #000;\n  font-style: italic;\n  font-weight: bold;\n}\n\ndel {\n  text-decoration: line-through;\n}\n\nabbr[title],\ndfn[title] {\n  border-bottom: 1px dotted;\n  cursor: help;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\n/* change border colour to suit your needs */\nhr {\n  display: block;\n  height: 1px;\n  border: 0;\n  border-top: 1px solid #cccccc;\n  margin: 1em 0;\n  padding: 0;\n}\n\ninput,\nselect {\n  vertical-align: middle;\n}\n#header {\n  text-align: center;\n  background: red;\n  padding: 20px;\n  clear: both;\n  border-bottom: 3px solid gray;\n}\n#header h1 {\n  font-size: 40px;\n}\n#monsters {\n  display: none;\n}\n#combatArea {\n  display: flex;\n  align-items: center;\n}\n#player,\n#monster {\n  padding: 20px 40px;\n  text-align: center;\n  flex-grow: 2;\n}\n#fight {\n  flex-grow: 1;\n}\nlabel {\n  display: inline-block;\n  min-width: 100px;\n}\n',""])},function(n,t,e){"use strict";n.exports=function(n){var t=[];return t.toString=function(){return this.map(function(t){var e=function(n,t){var e=n[1]||"",r=n[3];if(!r)return e;if(t&&"function"==typeof btoa){var o=(i=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),a=r.sources.map(function(n){return"/*# sourceURL=".concat(r.sourceRoot).concat(n," */")});return[e].concat(a).concat([o]).join("\n")}var i,s,l;return[e].join("\n")}(t,n);return t[2]?"@media ".concat(t[2],"{").concat(e,"}"):e}).join("")},t.i=function(n,e){"string"==typeof n&&(n=[[null,n,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var i=0;i<n.length;i++){var s=n[i];null!=s[0]&&r[s[0]]||(e&&!s[2]?s[2]=e:e&&(s[2]="(".concat(s[2],") and (").concat(e,")")),t.push(s))}},t}},function(n,t,e){"use strict";var r,o={},a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var n={};return function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}n[t]=e}return n[t]}}();function s(n,t){for(var e=[],r={},o=0;o<n.length;o++){var a=n[o],i=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(s):e.push(r[i]={id:i,parts:[s]})}return e}function l(n,t){for(var e=0;e<n.length;e++){var r=n[e],a=o[r.id],i=0;if(a){for(a.refs++;i<a.parts.length;i++)a.parts[i](r.parts[i]);for(;i<r.parts.length;i++)a.parts.push(m(r.parts[i],t))}else{for(var s=[];i<r.parts.length;i++)s.push(m(r.parts[i],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function u(n){var t=document.createElement("style");if(void 0===n.attributes.nonce){var r=e.nc;r&&(n.attributes.nonce=r)}if(Object.keys(n.attributes).forEach(function(e){t.setAttribute(e,n.attributes[e])}),"function"==typeof n.insert)n.insert(t);else{var o=i(n.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,d=(c=[],function(n,t){return c[n]=t,c.filter(Boolean).join("\n")});function h(n,t,e,r){var o=e?"":r.css;if(n.styleSheet)n.styleSheet.cssText=d(t,o);else{var a=document.createTextNode(o),i=n.childNodes;i[t]&&n.removeChild(i[t]),i.length?n.insertBefore(a,i[t]):n.appendChild(a)}}var p=null,f=0;function m(n,t){var e,r,o;if(t.singleton){var a=f++;e=p||(p=u(t)),r=h.bind(null,e,a,!1),o=h.bind(null,e,a,!0)}else e=u(t),r=function(n,t,e){var r=e.css,o=e.media,a=e.sourceMap;if(o&&n.setAttribute("media",o),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleSheet)n.styleSheet.cssText=r;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(r))}}.bind(null,e,t),o=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)};return r(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap)return;r(n=t)}else o()}}n.exports=function(n,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a());var e=s(n,t);return l(e,t),function(n){for(var r=[],a=0;a<e.length;a++){var i=e[a],u=o[i.id];u&&(u.refs--,r.push(u))}n&&l(s(n,t),t);for(var c=0;c<r.length;c++){var d=r[c];if(0===d.refs){for(var h=0;h<d.parts.length;h++)d.parts[h]();delete o[d.id]}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5jc3M/OTgxOSIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwid2luZG93Iiwib25sb2FkIiwidGhpcyIsIm1vbnN0ZXJMaXN0IiwicGxheWVyIiwicGxheWVySWRzIiwibW9uc3RlcklkcyIsImxvZ0NvdW50IiwiYmVnaW5GaWdodCIsImhlYWx0aCIsInN0cmVuZ3RoIiwidG9TdHJpbmciLCJyZW1vdmVNb25zdGVyIiwidXBEYXRlTW9uc3RlclZhbHVlIiwidXBkYXRlUGxheWVyVmFsdWVzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiYWxlcnQiLCJzaGlmdCIsInJlYWRJbkFuZENyZWF0ZVBsYXllciIsImdhbWUiLCJwbGF5ZXJJbnB1dCIsInF1ZXJ5U2VsZWN0b3IiLCJQbGF5ZXIiLCJkYXRhc2V0IiwicGFyc2VJbnQiLCJyZWFkSW5BbmRDcmVhdGVNb25zdGVyIiwiZm9yRWFjaCIsIm1vbnN0ZXJJbnB1dCIsInB1c2giLCJNb25zdGVyIiwiR2FtZSIsIklucHV0UmVhZGVyIiwiZmlnaHRCdXR0b24iLCJmaWdodExvZyIsIm9uY2xpY2siLCJpbm5lckhUTUwiLCJjb250ZW50Iiwib3B0aW9ucyIsImxvY2FscyIsInVzZVNvdXJjZU1hcCIsImxpc3QiLCJtYXAiLCJpdGVtIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlTWFwIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImNvbmNhdCIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlIiwic291cmNlUm9vdCIsImpvaW4iLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJpZCIsIl9pIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIkJvb2xlYW4iLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJlIiwibGlzdFRvU3R5bGVzIiwic3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsInBhcnRzIiwiYWRkU3R5bGVzVG9Eb20iLCJkb21TdHlsZSIsImoiLCJyZWZzIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwiaW5kZXgiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJvYmoiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwiZmlyc3RDaGlsZCIsInBhcmVudE5vZGUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJuZXdPYmoiLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwiX2RvbVN0eWxlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJ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LEdBRUZ0QyxFQURnQlIsRUFBYThDLEVBQVN0RixHQUNaQSxHQUc1QixJQUFLLElBQUkwQixFQUFLLEVBQUdBLEVBQUs2RCxFQUFVN0csT0FBUWdELElBQU0sQ0FDNUMsSUFBSThELEVBQVlELEVBQVU3RCxHQUUxQixHQUF1QixJQUFuQjhELEVBQVVyQyxLQUFZLENBQ3hCLElBQUssSUFBSUQsRUFBSSxFQUFHQSxFQUFJc0MsRUFBVXpDLE1BQU1yRSxPQUFRd0UsSUFDMUNzQyxFQUFVekMsTUFBTUcsWUFHWHRCLEVBQVk0RCxFQUFVL0QiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFwiLi9zdHlsZS5jc3NcIjtcclxuXHJcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICBjbGFzcyBHYW1lIHtcclxuICAgIHBsYXllcjogUGxheWVyO1xyXG4gICAgbW9uc3Rlckxpc3Q6IE1vbnN0ZXJbXTtcclxuICAgIHBsYXllcklkczogTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PjtcclxuICAgIG1vbnN0ZXJJZHM6IE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XHJcbiAgICBsb2dDb3VudDogc3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIC8qKkjDpHIgZGVrbGFyZXJhciB2aSBhbGxhIHZhcmlhYmxlciBzb20gYmVow7Z2cyBpIHNwZWxldC5cclxuICAgICAgICogQmVow7Z2cyBwbGF5ZXJJZHMgJiBtb25zdGVySWRzP1xyXG4gICAgICAgKi9cclxuICAgICAgdGhpcy5tb25zdGVyTGlzdCA9IFtdO1xyXG4gICAgICB0aGlzLnBsYXllciA9IG51bGw7XHJcbiAgICAgIHRoaXMucGxheWVySWRzID0gbnVsbDtcclxuICAgICAgdGhpcy5tb25zdGVySWRzID0gbnVsbDtcclxuICAgICAgdGhpcy5sb2dDb3VudCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgYmVnaW5GaWdodCgpIHtcclxuICAgICAgLyoqU2Uga29tbWVudGFyZXIgaSBtYWluIGzDpG5nc3QgbmVyLiAqL1xyXG4gICAgICB0aGlzLm1vbnN0ZXJMaXN0WzBdLmhlYWx0aCA9XHJcbiAgICAgICAgdGhpcy5tb25zdGVyTGlzdFswXS5oZWFsdGggLSB0aGlzLnBsYXllci5zdHJlbmd0aDtcclxuICAgICAgdGhpcy5tb25zdGVySWRzWzJdLnZhbHVlID0gdGhpcy5tb25zdGVyTGlzdFswXS5oZWFsdGgudG9TdHJpbmcoKTtcclxuICAgICAgaWYgKHRoaXMubW9uc3Rlckxpc3RbMF0uaGVhbHRoIDw9IDApIHtcclxuICAgICAgICB0aGlzLmxvZ0NvdW50ID1cclxuICAgICAgICAgIHRoaXMubG9nQ291bnQgKyAoXCJUaGUgXCIgKyB0aGlzLm1vbnN0ZXJMaXN0WzBdLm5hbWUgKyBcIiBkaWVkPGJyPlwiKTtcclxuICAgICAgICB0aGlzLnJlbW92ZU1vbnN0ZXIoKTtcclxuICAgICAgICB0aGlzLnVwRGF0ZU1vbnN0ZXJWYWx1ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlUGxheWVyVmFsdWVzKCkge1xyXG4gICAgICAvKipQbGF5ZXJJZHMgw6RyIGxpc3RhbiBhdiBwbGF5ZXJ0ZXh0ZsOkbHRlbi5cclxuICAgICAgICovXHJcbiAgICAgIHRoaXMucGxheWVySWRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNwbGF5ZXIgPiBpbnB1dFwiKTtcclxuICAgICAgdGhpcy5wbGF5ZXJJZHNbMF0udmFsdWUgPSB0aGlzLnBsYXllci5uYW1lLnRvU3RyaW5nKCk7XHJcbiAgICAgIHRoaXMucGxheWVySWRzWzFdLnZhbHVlID0gdGhpcy5wbGF5ZXIuc3RyZW5ndGgudG9TdHJpbmcoKTtcclxuICAgICAgdGhpcy5wbGF5ZXJJZHNbMl0udmFsdWUgPSB0aGlzLnBsYXllci5oZWFsdGgudG9TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cERhdGVNb25zdGVyVmFsdWUoKSB7XHJcbiAgICAgIC8qKk1vbnN0ZXJJZHMgw6RyIGxpc3RhbiBhdiBtb25zdGVydGV4dGbDpGx0ZW4uXHJcbiAgICAgICAqIE1vbnN0ZXJMaXN0WzBdIMOkciBkZXQgbW9uc3RlciBzb20gw6RyIFwiY3VycmVudFwiIGkgZmlnaHQuXHJcbiAgICAgICAqL1xyXG4gICAgICB0aGlzLm1vbnN0ZXJJZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI21vbnN0ZXIgPiBpbnB1dFwiKTtcclxuICAgICAgaWYgKHRoaXMubW9uc3Rlckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMubW9uc3Rlcklkc1swXS52YWx1ZSA9IHRoaXMubW9uc3Rlckxpc3RbMF0ubmFtZS50b1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMubW9uc3Rlcklkc1sxXS52YWx1ZSA9IHRoaXMubW9uc3Rlckxpc3RbMF0uc3RyZW5ndGgudG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLm1vbnN0ZXJJZHNbMl0udmFsdWUgPSB0aGlzLm1vbnN0ZXJMaXN0WzBdLmhlYWx0aC50b1N0cmluZygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFsZXJ0KFwiWW91IHdvbiEgQWxsIG1vbnN0ZXJzIGFyZSBkZWFkIVwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVtb3ZlTW9uc3RlcigpIHtcclxuICAgICAgLyoqbW9uc3Rlckxpc3Quc2hpZnQgdGFyIGJvcnQgZsO2cnN0YSBtb25zdHJldCB1ciBhcnJheW4sXHJcbiAgICAgICAqICB2aWxrZXQgZ8O2ciBhdHQgXCJjdXJyZW50XCIgbW9uc3RlciBpIGZpZ2h0IGFsbHRpZCDDpHIgWzBdLiAqL1xyXG4gICAgICB0aGlzLm1vbnN0ZXJMaXN0LnNoaWZ0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbnRlcmZhY2UgQ2hhcmFjdGVyIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGhlYWx0aDogbnVtYmVyO1xyXG4gICAgc3RyZW5ndGg6IG51bWJlcjtcclxuICB9XHJcblxyXG4gIGNsYXNzIE1vbnN0ZXIgaW1wbGVtZW50cyBDaGFyYWN0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcsXHJcbiAgICAgIHB1YmxpYyBoZWFsdGg6IG51bWJlcixcclxuICAgICAgcHVibGljIHN0cmVuZ3RoOiBudW1iZXJcclxuICAgICkge1xyXG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICB0aGlzLmhlYWx0aCA9IGhlYWx0aDtcclxuICAgICAgdGhpcy5zdHJlbmd0aCA9IHN0cmVuZ3RoO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xhc3MgUGxheWVyIGltcGxlbWVudHMgQ2hhcmFjdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICBwdWJsaWMgbmFtZTogc3RyaW5nLFxyXG4gICAgICBwdWJsaWMgaGVhbHRoOiBudW1iZXIsXHJcbiAgICAgIHB1YmxpYyBzdHJlbmd0aDogbnVtYmVyXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgdGhpcy5oZWFsdGggPSBoZWFsdGg7XHJcbiAgICAgIHRoaXMuc3RyZW5ndGggPSBzdHJlbmd0aDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsYXNzIElucHV0UmVhZGVyIHtcclxuICAgIC8qKkjDpHIgw6RyIGRldCBmw7Zyc3RhIHNvbSBow6RuZGVyIGkgc3BlbGV0LlxyXG4gICAgICogVmkgbMOkc2VyIGluIGFsbCBpbnB1dCBpZnLDpW4gLmh0bWxcclxuICAgICAqIEVuIGtsYXNzIG1lZCBmdW5rdGlvbmFsaXRldCBhdHQgc2thcGEgc3BlbGFyZSBvY2ggbW9uc3Rlci5cclxuICAgICAqIERlbiBow6RyIG1ldG9kZXJuYSBoasOkbHBlciBiYXJhIHRpbGwgYXR0IHNlZGFuIHNrYXBhIGVuIHBsYXllci9tb25zdGVyIGkgR2FtZS1rbGFzc2VuLiovXHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIHN0YXRpYyByZWFkSW5BbmRDcmVhdGVQbGF5ZXIoZ2FtZTogR2FtZSkge1xyXG4gICAgICAvKipWaSBrYWxsYXIgcMOlICNwbGF5ZXJEYXRhIGkgLmh0bWwgZsO2ciBhdHQgZsOlIHRpbGxnw6VuZyB0aWxsIHBsYXllcklucHV0LlxyXG4gICAgICAgKiBWaSBoYXIgZ2pvcnQgZGVuIHN0YXRpYyBmw7ZyIGF0dCBpbnB1dC1yZWFkZXIgaW50ZSBiZWjDtnZlciBuw6VncmEgb2JqZWt0IHV0YW4gZW5kYXN0IG1ldG9kZXIuICovXHJcbiAgICAgIGxldCBwbGF5ZXJJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheWVyRGF0YVwiKTtcclxuICAgICAgZ2FtZS5wbGF5ZXIgPSBuZXcgUGxheWVyKFxyXG4gICAgICAgIHBsYXllcklucHV0LmRhdGFzZXQubmFtZSxcclxuICAgICAgICBwYXJzZUludChwbGF5ZXJJbnB1dC5kYXRhc2V0LmhlYWx0aCwgMTApLFxyXG4gICAgICAgIHBhcnNlSW50KHBsYXllcklucHV0LmRhdGFzZXQuc3RyZW5ndGgsIDEwKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZWFkSW5BbmRDcmVhdGVNb25zdGVyKGdhbWU6IEdhbWUpIHtcclxuICAgICAgbGV0IG1vbnN0ZXJzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgICAgXCIjbW9uc3RlcnMgPiBpbnB1dFwiXHJcbiAgICAgICk7XHJcbiAgICAgIC8qKlZpIGFudsOkbmRlciBlbiBmb3ItbG9vcCBlZnRlcnNvbSBhdHQgZGV0IGZpbm5zIGZsZXJhIG1vbnN0ZXIuIEFubmFycyBzZSBvdmFuLiAqL1xyXG4gICAgICBtb25zdGVycy5mb3JFYWNoKGZ1bmN0aW9uKG1vbnN0ZXJJbnB1dCkge1xyXG4gICAgICAgIGdhbWUubW9uc3Rlckxpc3QucHVzaChcclxuICAgICAgICAgIG5ldyBNb25zdGVyKFxyXG4gICAgICAgICAgICBtb25zdGVySW5wdXQuZGF0YXNldC5uYW1lLFxyXG4gICAgICAgICAgICBwYXJzZUludChtb25zdGVySW5wdXQuZGF0YXNldC5oZWFsdGgsIDEwKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQobW9uc3RlcklucHV0LmRhdGFzZXQuc3RyZW5ndGgsIDEwKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIGdhbWUgPSBuZXcgR2FtZSgpOyAvL0jDpHIgc2thcGFyIHZpIGV0dCBueXR0IGdhbWUtb2JqZWt0LlxyXG4gIElucHV0UmVhZGVyLnJlYWRJbkFuZENyZWF0ZU1vbnN0ZXIoZ2FtZSk7IC8vSMOkciBrYWxsYXIgdmkgbWV0b2RlbiBzb20gbMOkc2VyIGluIGluZm8gb2NoIHNrYXBhciBlbiBtb25zdGVybGlzdGEgdGlsbGjDtnJhbmRlIGdhbWUuXHJcbiAgSW5wdXRSZWFkZXIucmVhZEluQW5kQ3JlYXRlUGxheWVyKGdhbWUpOyAvL1NlIG92YW4gZmFzdCBmw7ZyIHNwZWxhcmUuIFZpIHNraWNrYXIgaW4gZ2FtZSBzb20gcGFyYW1ldGVyIGbDtnIgYXR0IG7DpSBhcnJheW4gbW9uc3Rlckxpc3QgaSBnYW1lLW9iamVrdGV0LlxyXG5cclxuICBnYW1lLnVwZGF0ZVBsYXllclZhbHVlcygpOyAvL0dhbWUga2FsbGFyIHNpbiBlZ2VuIG1ldG9kIGbDtnIgYXR0IGt1bm5hIGpvYmJhIG1lZCBzaW4gZGF0YSBkaXJla3Qgc29tIGZpbm5zIGkgc2luIGtsYXNzLlxyXG4gIGdhbWUudXBEYXRlTW9uc3RlclZhbHVlKCk7IC8vU2Ugb3Zhbi4gRGV0IMOkciBow6RyIHZpIHVwcGRhdGVyYXIgdGV4dC1ib3hhcm5hIHNvbSBmaW5ucyBpIC5odG1sIG1lZCBpbmZvcm1hdGlvbiBpZnLDpW4gZ2FtZSBvY2ggZGVzcyB2YXJpYWJsZXIuIFQgZXggZ2FtZS5tb25zdGVyTGlzdC5cclxuXHJcbiAgdmFyIGZpZ2h0QnV0dG9uOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmlnaHRcIik7IC8vSMOkciBkZWtsYXJlcmFyIHZpIGtuYXBwZW4gXCJGSUdIVCFcIiBzb20gZmlubnMgaSAuaHRtbCBmw7ZyIGF0dCBrdW5uYSB0aWxsZGVsYSBkZW4gZW4gZnVua3Rpb24uXHJcbiAgdmFyIGZpZ2h0TG9nOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uc29sZVwiKTtcclxuXHJcbiAgZmlnaHRCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZ2FtZS5sb2dDb3VudCA9XHJcbiAgICAgIGdhbWUubG9nQ291bnQgK1xyXG4gICAgICBcIlBPVyEhISA8YnI+XCIgK1xyXG4gICAgICBcIi0gXCIgK1xyXG4gICAgICBnYW1lLnBsYXllci5uYW1lICtcclxuICAgICAgXCIgYml0Y2gtc2xhcHBlZCBcIiArXHJcbiAgICAgIGdhbWUubW9uc3Rlckxpc3RbMF0ubmFtZSArXHJcbiAgICAgIFwiIGFuZCBnYXZlIFwiICtcclxuICAgICAgZ2FtZS5wbGF5ZXIuc3RyZW5ndGggK1xyXG4gICAgICBcIiBkYW1hZ2UgPGJyPlwiICtcclxuICAgICAgZ2FtZS5tb25zdGVyTGlzdFswXS5uYW1lICtcclxuICAgICAgXCI6IE9XISAqY3JpZXMqPGJyPlwiO1xyXG4gICAgZ2FtZS5iZWdpbkZpZ2h0KCk7XHJcbiAgICBmaWdodExvZy5pbm5lckhUTUwgPSBnYW1lLmxvZ0NvdW50O1xyXG5cclxuICAgIC8qKkjDpHIgbmVyZSBrb21tZXIgZnVua3Rpb25lbiAub25jbGljayB0aWxsIGtuYXBwZW4gXCJGSUdIVCFcIiBzb20gdmkgZGVrbGFyZXJhZGUgb3Zhbi5cclxuICAgICAqIERldCBzb20gc2tlciBuZWRhbiDDpHIgZGV0IHNvbSBrb21tZXIgYXR0IHNraWNrYSBuw6RyIHZpIHRyeWNrZXIgcMOlIGtuYXBwZW4gXCJGSUdIVCFcIi5cclxuICAgICAqL1xyXG4gICAgLypnYW1lLm1vbnN0ZXJMaXN0WzBdLmhlYWx0aCA9XHJcbiAgICAgIGdhbWUubW9uc3Rlckxpc3RbMF0uaGVhbHRoIC0gZ2FtZS5wbGF5ZXIuc3RyZW5ndGg7IC8vIE1vbnN0cmV0cyBow6Rsc2EgLSBwbGF5ZXJzIHN0eXJrYSA9IG1vbnN0cmV0cyBueWEgaMOkbHNhLlxyXG4gICAgZ2FtZS5tb25zdGVySWRzWzJdLnZhbHVlID0gZ2FtZS5tb25zdGVyTGlzdFswXS5oZWFsdGg7IC8vTW9uc3RlcklkIHJlZmVyZXJhciB0aWxsIHRleHRib3hlbnMgdsOkcmRlIG9jaCB1cHBkYXRlcmFyIG1vbnN0cmV0cyBueWEgaMOkbHNvdsOkcmRlLlxyXG4gICAgaWYgKGdhbWUubW9uc3Rlckxpc3RbMF0uaGVhbHRoIDw9IDApIHtcclxuICAgICAgLy9JZi1zYXRzZW4ga29sbGFyIGVmdGVyIG9tIG1vbnN0cmV0IGhhciBuw6Vnb24gXCJoZWFsdGhcIiBrdmFyLiBPbSBzw6UgaW50ZSDDpHIgZmFsbGV0OiBzZSBuZWRhbi5cclxuICAgICAgYWxlcnQoXCJUaGUgXCIgKyBnYW1lLm1vbnN0ZXJMaXN0WzBdLm5hbWUgKyBcIiBkaWVkXCIpOyAvLyBhbGVydCBnZW5lcmVyYXIgZW4gcG9wLXVwcnV0YSBzb20gdGFsYXIgb20gYXR0IG1vbnN0cmV0IGhhciBnw6V0dCB1ciB0aWRlbiBvY2ggaW50ZSBsw6RuZ3JlIMOkciBtZWQgb3NzLlxyXG4gICAgICBnYW1lLnJlbW92ZU1vbnN0ZXIoKTsgLy8gQmVncmF2bmluZ2VuIMOkciBpbnN0w6RsbGQgb2NoIHZpIHBsb2NrYXIgYm9ydCBkZXQgZnJhbWxpZG5lIG1vbnN0cmV0IGluZnLDpW4gYXJyYXllbi5cclxuICAgICAgZ2FtZS51cERhdGVNb25zdGVyVmFsdWUoKTsgLy8gZ2FtZSBrYWxsYXIgcMOlIHNpbiBlZ2VuIG1ldG9kIGbDtnIgYXR0IHVwcGRhdGVyYSB0ZXh0Ym94YXJuYSBtZWQgdsOkcmRlbiBmw7ZyIGRlbiBueWEga29tYmF0YW50ZW4uXHJcbiAgICB9Ki9cclxuICB9O1xyXG59O1xyXG4iLCJ2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCIpO1xuXG5pZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbn1cblxudmFyIG9wdGlvbnMgPSB7fVxuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZiAoY29udGVudC5sb2NhbHMpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbn1cbiIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLyogXFxuaHRtbDVkb2N0b3IuY29tIFJlc2V0IFN0eWxlc2hlZXRcXG52MS42LjFcXG5MYXN0IFVwZGF0ZWQ6IDIwMTAtMDktMTdcXG5BdXRob3I6IFJpY2hhcmQgQ2xhcmsgLSBodHRwOi8vcmljaGNsYXJrZGVzaWduLmNvbSBcXG5Ud2l0dGVyOiBAcmljaF9jbGFya1xcbiovXFxuXFxuaHRtbCxcXG5ib2R5LFxcbmRpdixcXG5zcGFuLFxcbm9iamVjdCxcXG5pZnJhbWUsXFxuaDEsXFxuaDIsXFxuaDMsXFxuaDQsXFxuaDUsXFxuaDYsXFxucCxcXG5ibG9ja3F1b3RlLFxcbnByZSxcXG5hYmJyLFxcbmFkZHJlc3MsXFxuY2l0ZSxcXG5jb2RlLFxcbmRlbCxcXG5kZm4sXFxuZW0sXFxuaW1nLFxcbmlucyxcXG5rYmQsXFxucSxcXG5zYW1wLFxcbnNtYWxsLFxcbnN0cm9uZyxcXG5zdWIsXFxuc3VwLFxcbnZhcixcXG5iLFxcbmksXFxuZGwsXFxuZHQsXFxuZGQsXFxub2wsXFxudWwsXFxubGksXFxuZmllbGRzZXQsXFxuZm9ybSxcXG5sYWJlbCxcXG5sZWdlbmQsXFxudGFibGUsXFxuY2FwdGlvbixcXG50Ym9keSxcXG50Zm9vdCxcXG50aGVhZCxcXG50cixcXG50aCxcXG50ZCxcXG5hcnRpY2xlLFxcbmFzaWRlLFxcbmNhbnZhcyxcXG5kZXRhaWxzLFxcbmZpZ2NhcHRpb24sXFxuZmlndXJlLFxcbmZvb3RlcixcXG5oZWFkZXIsXFxuaGdyb3VwLFxcbm1lbnUsXFxubmF2LFxcbnNlY3Rpb24sXFxuc3VtbWFyeSxcXG50aW1lLFxcbm1hcmssXFxuYXVkaW8sXFxudmlkZW8ge1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIGJvcmRlcjogMDtcXG4gIG91dGxpbmU6IDA7XFxuICBmb250LXNpemU6IDEwMCU7XFxuICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcXG59XFxuXFxuYm9keSB7XFxuICBsaW5lLWhlaWdodDogMTtcXG59XFxuXFxuYXJ0aWNsZSxcXG5hc2lkZSxcXG5kZXRhaWxzLFxcbmZpZ2NhcHRpb24sXFxuZmlndXJlLFxcbmZvb3RlcixcXG5oZWFkZXIsXFxuaGdyb3VwLFxcbm1lbnUsXFxubmF2LFxcbnNlY3Rpb24ge1xcbiAgZGlzcGxheTogYmxvY2s7XFxufVxcblxcbm5hdiB1bCB7XFxuICBsaXN0LXN0eWxlOiBub25lO1xcbn1cXG5cXG5ibG9ja3F1b3RlLFxcbnEge1xcbiAgcXVvdGVzOiBub25lO1xcbn1cXG5cXG5ibG9ja3F1b3RlOmJlZm9yZSxcXG5ibG9ja3F1b3RlOmFmdGVyLFxcbnE6YmVmb3JlLFxcbnE6YWZ0ZXIge1xcbiAgY29udGVudDogXFxcIlxcXCI7XFxuICBjb250ZW50OiBub25lO1xcbn1cXG5cXG5hIHtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxuICBmb250LXNpemU6IDEwMCU7XFxuICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcXG59XFxuXFxuLyogY2hhbmdlIGNvbG91cnMgdG8gc3VpdCB5b3VyIG5lZWRzICovXFxuaW5zIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZjk7XFxuICBjb2xvcjogIzAwMDtcXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG59XFxuXFxuLyogY2hhbmdlIGNvbG91cnMgdG8gc3VpdCB5b3VyIG5lZWRzICovXFxubWFyayB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY5O1xcbiAgY29sb3I6ICMwMDA7XFxuICBmb250LXN0eWxlOiBpdGFsaWM7XFxuICBmb250LXdlaWdodDogYm9sZDtcXG59XFxuXFxuZGVsIHtcXG4gIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xcbn1cXG5cXG5hYmJyW3RpdGxlXSxcXG5kZm5bdGl0bGVdIHtcXG4gIGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQ7XFxuICBjdXJzb3I6IGhlbHA7XFxufVxcblxcbnRhYmxlIHtcXG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XFxuICBib3JkZXItc3BhY2luZzogMDtcXG59XFxuXFxuLyogY2hhbmdlIGJvcmRlciBjb2xvdXIgdG8gc3VpdCB5b3VyIG5lZWRzICovXFxuaHIge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBoZWlnaHQ6IDFweDtcXG4gIGJvcmRlcjogMDtcXG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NjY2NjO1xcbiAgbWFyZ2luOiAxZW0gMDtcXG4gIHBhZGRpbmc6IDA7XFxufVxcblxcbmlucHV0LFxcbnNlbGVjdCB7XFxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcbn1cXG4jaGVhZGVyIHtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGJhY2tncm91bmQ6IHJlZDtcXG4gIHBhZGRpbmc6IDIwcHg7XFxuICBjbGVhcjogYm90aDtcXG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCBncmF5O1xcbn1cXG4jaGVhZGVyIGgxIHtcXG4gIGZvbnQtc2l6ZTogNDBweDtcXG59XFxuI21vbnN0ZXJzIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcbiNjb21iYXRBcmVhIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbn1cXG4jcGxheWVyLFxcbiNtb25zdGVyIHtcXG4gIHBhZGRpbmc6IDIwcHggNDBweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGZsZXgtZ3JvdzogMjtcXG59XFxuI2ZpZ2h0IHtcXG4gIGZsZXgtZ3JvdzogMTtcXG59XFxubGFiZWwge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgbWluLXdpZHRoOiAxMDBweDtcXG59XFxuXCIsIFwiXCJdKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwie1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBtb2R1bGVzW19pXTsgLy8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuICAgICAgLy8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcbiAgICAgIC8vIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cbiAgICAgIC8vIEkgaG9wZSB0aGlzIHdpbGwgbmV2ZXIgb2NjdXIgKEhleSB0aGlzIHdheSB3ZSBoYXZlIHNtYWxsZXIgYnVuZGxlcylcblxuICAgICAgaWYgKGl0ZW1bMF0gPT0gbnVsbCB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBpZiAobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2UgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCIoXCIuY29uY2F0KGl0ZW1bMl0sIFwiKSBhbmQgKFwiKS5jb25jYXQobWVkaWFRdWVyeSwgXCIpXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG5cbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gIHJldHVybiBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlcyA9IFtdO1xuICB2YXIgbmV3U3R5bGVzID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjc3MgPSBpdGVtWzFdO1xuICAgIHZhciBtZWRpYSA9IGl0ZW1bMl07XG4gICAgdmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG4gICAgdmFyIHBhcnQgPSB7XG4gICAgICBjc3M6IGNzcyxcbiAgICAgIG1lZGlhOiBtZWRpYSxcbiAgICAgIHNvdXJjZU1hcDogc291cmNlTWFwXG4gICAgfTtcblxuICAgIGlmICghbmV3U3R5bGVzW2lkXSkge1xuICAgICAgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBwYXJ0czogW3BhcnRdXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgIHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuICAgIHZhciBqID0gMDtcblxuICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgZG9tU3R5bGUucmVmcysrO1xuXG4gICAgICBmb3IgKDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgcGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG5cbiAgICAgIHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge1xuICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgcmVmczogMSxcbiAgICAgICAgcGFydHM6IHBhcnRzXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIG9wdGlvbnMuYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKG9wdGlvbnMuYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgb3B0aW9ucy5hdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIG9wdGlvbnMuYXR0cmlidXRlcyA9IHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZXMgPT09ICdvYmplY3QnID8gb3B0aW9ucy5hdHRyaWJ1dGVzIDoge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgdmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcbiAgYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgdmFyIG1heVJlbW92ZSA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgICAgdmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cbiAgICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgICBkb21TdHlsZS5yZWZzLS07XG4gICAgICAgIG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3TGlzdCkge1xuICAgICAgdmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcbiAgICAgIGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1heVJlbW92ZS5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfZG9tU3R5bGUgPSBtYXlSZW1vdmVbX2ldO1xuXG4gICAgICBpZiAoX2RvbVN0eWxlLnJlZnMgPT09IDApIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBfZG9tU3R5bGUucGFydHNbal0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBzdHlsZXNJbkRvbVtfZG9tU3R5bGUuaWRdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==